#!/bin/sh

#    ____    __
#   / __/__ / /___ _____
#  _\ \/ -_) __/ // / _ \
# /___/\__/\__/\_,_/ .__/
#                 /_/


# Install packages
DOTS=$(cd -P -- "$(dirname -- "$0")" && pwd -P)
bawkpack_path="$DOTS/extra/bawkpack"       # You can change where to put bawkpack example:
# bawkpack_path="${TMPDIR:-/tmp}/bawkpack" # Download and run bawkpack on /tmp/ so it deletes itself after a system reset
bsymlink_path="$DOTS/extra/bsymlink"       # Same with bsymlink

curl -fsSL 'https://raw.githubusercontent.com/NNBnh/superb-bootstrap/master/extra/bawkpack' --create-dirs --output "$bawkpack_path" && chmod +x "$bawkpack_path" # Update/download bawkpack
"$bawkpack_path" "$DOTS/packageslist"


# Before symlink
	# Create directories (to symlink files inside only, not the directory itself)
	mkdir "$HOME/.local/bin" "$HOME/.config/godot" "$HOME/.config/retroarch"

	# Delete files that may conflict when symlink dotfiles
	rm .bashrc

# Symlink dotfiles
curl -fsSL 'https://raw.githubusercontent.com/NNBnh/superb-bootstrap/master/extra/bsymlink' --create-dirs --output "$bsymlink_path" && chmod +x "$bsymlink_path" # Update/download bsymlink
"$bsymlink_path" "$DOTS/home" "$HOME"
sudo "$bsymlink_path" "$DOTS/root" '/'


# After symlink
	# Change default shell
	chsh -s "/usr/bin/fish"

	# Enable firewall
	sudo ufw enable


exit 0
